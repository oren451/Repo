#include "FruitProduct.h"
#include "iostream"

using namespace std;

FruitProduct::FruitProduct() : FarmProduct() {
	mSugarAmount = 0;
}

FruitProduct::FruitProduct(char* name, int id, ShelfRow place, int weight,
		ProductType type, ExposureValue exposure, int supplierNumber, FarmType farmtype,
		int seasonsnumber, int sugarAmount) : FarmProduct(name, id, place, weight, type, exposure, supplierNumber, farmtype, seasonsnumber)
{
	mSugarAmount = sugarAmount;
}

FruitProduct::~FruitProduct() {
}

int FruitProduct::calculatePrice() {
	return FarmProduct::calculatePrice() + (mSugarAmount / 2);
}

void FruitProduct::print() {

	FarmProduct::print();
	cout << " (" << mSugarAmount << ") " << endl;
}

void FruitProduct::write(ostream& out) const
{
	out << "ID: " << mId << endl;
	out << "TYPE: " << mType << endl;
	out << "PLACE: " << mPlace.getRow() << "," << mPlace.getShelf() << endl;
	out << "WEIGHT: " << mWeight << endl;
	out << "EXPOSURE: " << mExposure << endl;
}

void FruitProduct::save(ofstream & out) const
{
	out << mId << " ";
	out << mType << " ";
	out << mPlace.getRow() << "," << mPlace.getShelf() << " ";
	out << mWeight << " ";
	out << mExposure << " ";
}

void FruitProduct::load(ifstream & in)
{
	in >> mId >> mType >> mPlace.getRow() >> mPlace.getShelf()
					>> mWeight >> mExposure;
}

void FruitProduct::saveBin(ofstream & out) const
{
	FarmProduct::saveBin(out);
	out.write((char*)&mId, sizeof(mId));
	out.write((char*)&mPlace, sizeof(mPlace));
	out.write((char*)&mWeight, sizeof(mWeight));
	out.write((char*)&mExposure, sizeof(mExposure));
}

void FruitProduct::loadBin(ifstream & in)
{
	in.read((char*)&mId, sizeof(mId));
	in.read((char*)&mPlace, sizeof(mPlace));
	in.read((char*)&mWeight, sizeof(mWeight));
	in.read((char*)&mExposure, sizeof(mExposure));
}
